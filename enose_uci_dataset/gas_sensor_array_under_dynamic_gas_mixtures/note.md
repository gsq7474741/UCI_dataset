# Gas sensor array under dynamic gas mixtures

## 数据集

### 数据集信息

该数据集包含从 16 个暴露于不同浓度水平的气体混合物的化学传感器获取的时间序列。

具体来说，我们生成了两种气体混合物：空气中的乙烯和甲烷，以及空气中的乙烯和CO。

每次测量都是通过连续采集 16 个传感器阵列信号约 12 小时而不间断地进行的。

数据集是在加州大学圣地亚哥分校生物电路研究所化学信号实验室的气体输送平台设施中收集的。
测量系统平台具有多功能性，可以高精度、高重复性地获得所需浓度的化学物质。传感器阵列包括
4 种不同类型的 16 个化学传感器（Figaro Inc.，美国）：TGS-2600、TGS-2602、TGS-2610、TGS-2620（每种类型 4
个单元）。传感器集成了定制的信号调节和控制电子设备。传感器的工作电压控制着传感器的工作温度，在整个实验期间保持恒定在 5V。

传感器的电导率以 100 Hz 的采样频率连续采集。传感器阵列放置在 60 毫升的测量室中，气体样品以 300 毫升/分钟的恒定流量注入其中。
每次测量都是通过连续采集 16 个传感器阵列信号而构建的，同时浓度水平随机变化。对于每次测量（每种气体混合物），信号连续采集约12 小时而不间断。
浓度转换设置在随机时间（间隔 80-120秒）和随机浓度水平。
数据集的构建方式是存在所有可能的转换：增加、减少或将一种挥发物的浓度设置为零，而另一种挥发物的浓度保持不变（浓度水平为固定或为零）。
开始、结束和大约每10,000 秒时，我们插入额外的预定义纯气体混合物浓度模式。乙烯、甲烷和 CO的浓度范围经过选择，使得传感器响应的感应幅度相似。
此外，对于气体混合物，较低的浓度水平更受青睐。因此，传感器对所呈现的一组刺激的多变量响应具有挑战性，
因为没有一种配置（单一气体或混合物呈现）能够从传感器响应的幅度中轻松识别出来。特别是乙烯浓度范围为0-20 ppm；CO 为 0-600 ppm；甲烷为 0-300
ppm。

使该数据集可在线免费访问的主要目的是向传感器和人工智能研究社区提供从化学传感器获取的广泛而连续的时间序列，以开发和测试解决各种任务的策略。
具体而言，该数据集可能有助于开发用于连续监测的算法或改善传感系统的响应时间。
此外，阵列中相同类型的传感器的重复将允许进一步研究传感器的变异性（相同类型传感器的可重复性）。
其他有趣的主题可能包括传感器故障（当传感器开始出现故障时系统预测会下降到何种程度）或校准转移（一个传感器的模型是否可以扩展到其他传感器）。
有关生成的数据集的更多信息，请参阅Fonollosa 等人的《Reservoir Computing 补偿暴露于连续监测中快速变化的气体浓度的化学传感器阵列的缓慢响应》；
传感器和执行器B，2015 年。该数据集只能用于研究目的。完全排除商业目的。

### 变量信息

数据显示在两个不同的文件中：每个文件包含一种混合物的数据。
文件 ethylene_CO.txt 包含传感器暴露于空气中的乙烯和 CO 混合物时的记录。
文件 ethylene_methane.txt 包含由空气中的甲烷和乙烯混合物引起的获取的时间序列。

文件的结构相同：数据分布在 19 列中。
- 第一列表示时间（以秒为单位），
- 第二列表示甲烷（或 CO）浓度设定点（以 ppm 为单位），
- 第三列详细表示乙烯浓度设定点（以 ppm 为单位），
- 接下来的 16 列显示传感器阵列的记录。

文件包括一个标题（一行），其中包含每列的信息：
时间（秒）、甲烷浓度（ppm）、乙烯浓度（ppm）、传感器读数（16 个通道）
文件中传感器的顺序如下：
- TGS2602
- TGS2602
- TGS2600
- TGS2600
- TGS2610
- TGS2610
- TGS2620
- TGS2620
- TGS2602
- TGS2602
- TGS2600
- TGS2600
- TGS2610
- TGS2610
- TGS2620
- TGS2620

传感器读数可以通过 40.000/S_i 转换为 KOhm，其中 S_i 是文本文件中提供的值。

### 数据样例

`ethylene_CO.txt`:

```text
Time (seconds), CO conc (ppm), Ethylene conc (ppm), sensor readings (16 channels) 
0.00    0.00    0.00    -50.85  -1.95   -41.82  1.30    -4.07   -28.73  -13.49  -3.25   55139.95 50669.50 9626.26 9762.62 24544.02 21420.68 7650.61 6928.42
0.01    0.00    0.00    -49.40  -5.53   -42.78  0.49    3.58    -34.55  -9.59   5.37    54395.77 50046.91 9433.20 9591.21 24137.13 20930.33 7498.79 6800.66
0.01    0.00    0.00    -40.04  -16.09  -27.59  0.00    -7.16   -42.14  -12.52  -5.86   53960.02 49299.30 9324.40 9449.81 23628.90 20504.94 7369.67 6697.47
...
```

`ethylene_methane.txt`：

```text
Time (seconds), Methane conc (ppm), Ethylene conc (ppm), sensor readings (16 channels) 
0.00    0.00    0.00    -41.98  2067.64 -37.13  2.28    8.63    -26.62  -8.46   -0.33   3437.73 2728.14 4054.03 4007.89 4478.27 5056.98 3639.09 3128.49
0.01    0.00    0.00    -46.50  2067.88 -28.56  13.69   -12.35  -25.81  -5.04   -5.04   3432.44 2734.47 4038.62 4019.40 4496.72 5051.81 3636.97 3115.03
...  
```

## 数据处理

### 提取metadata

prompt:

```prompt
修改当前文件，增加以下16列
name：sensor0-15，共16列
description：sensor名字,
data_type：fp32
sensor：
- TGS2602
- TGS2602
- TGS2600
- TGS2600
- TGS2610
- TGS2610
- TGS2620
- TGS2620
- TGS2602
- TGS2602
- TGS2600
- TGS2600
- TGS2610
- TGS2610
- TGS2620
- TGS2620
unit：S_i
trans_to_ohm_functor：lambda x: 40.000/x*1000
column_sample_rate:100
```


### 时间序列SSL预训练任务

元数据：气体、浓度、采样率、电阻单位、每个样本时长

对于每个样本，处理为单个csv文件：

每列为一个传感器的电阻值（单位：千欧姆）,注意此处需要将原始的传感器相应换算为阻值（i.e. 40.0/S_i），最后几列为标签（气体种类浓度）。
例如：sensor_0,sensor_1,...,sensor_n,label_co_ppm,label_ethylene_ppm,label_methane_ppm
这两个文件加一起1.2GB，很大，处理的时候要根据数据的含义进行切分，
具体来说，当原数据中CO conc (ppm)/Methane conc (ppm) 和 Ethylene conc (ppm)任一值发生变化时，认为是一个新的样本。

prompt:

```text
请帮我根据以上信息处理数据集，生成csv文件。
当前目录结构如下：
.
├── note.md
└── .raw
    ├── ethylene_CO.txt
    └── ethylene_methane.txt

请帮我在./ssl_csv_samples下生成要求的文件，使用python
```

模型输出：

见 `process_data.py`